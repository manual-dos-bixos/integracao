{% extends 'base.html' %}

{% block title %} Create a New Post {% endblock %}

{% block content %}
    <section id="section-form-inscricao">
        <div class="text-light" id="form-header">
            <h1 class="text-center">Inscrição para adoção</h1>
            <span id="form-progress-bar" class="hidden">
                <span class="progress"></span>
                <span class="step-icon">1</span>
                <span class="step-icon">2</span>
                <span class="step-icon">3</span>
                <span class="step-icon">4</span>
                <span class="step-icon">5</span>
                <span class="step-icon">6</span>
            </span>
        </div>

        <form method="POST" class="col-xs-8 col-md-6 col-lg-4 p-0 text-light" id="form-adocao">
            <div class="form-section section-atual text-center">
                {{ form.hidden_tag() }}

                <h4 class="mb-3">Eu sou...</h4>
                <button class="w-100 btn btn-lg btn-primary px-4 py-3 my-3 d-flex flex-column align-items-center btn-tipo-aluno-inscricao" data-tipo="calouro">
                    <h1 class="m-0 p-0">Calouro</h1>
                    <small>Quero ser adotado!</small>
                </button>
                <button class="w-100 btn btn-lg btn-primary px-4 py-3 my-3 d-flex flex-column align-items-center btn-tipo-aluno-inscricao" data-tipo="veterano">
                    <h1 class="m-0 p-0">Veterano</h1>
                    <small>Quero adotar!</small>
                </button>
            </div>
            <div class="form-section">
                <div class="form-group">
                    <div class="form-group">
                        {{ form.nome.label(class="mt-3 mb-2") }}
                        {{ form.nome() }}
                        {% for error in form.nome.errors %}
                            <span style="color: red;">{{ error }}</span>
                        {% endfor %}
                    </div>

                    <div class="form-group">
                        {{ form.sobrenome.label(class="mt-3 mb-2") }}
                        {{ form.sobrenome() }}
                        {% for error in form.sobrenome.errors %}
                            <span style="color: red;">{{ error }}</span>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="form-section">
                <div class="form-group">
                    {{ form.idade.label(class="mt-3 mb-2") }}
                    {{ form.idade() }}
                    {% for error in form.idade.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
                <div class="form-group">
                    {{ form.whatsapp.label(class="mt-3 mb-2") }}
                    {{ form.whatsapp() }}
                    {% for error in form.whatsapp.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
                <div class="form-group">
                    {{ form.semestre_atual.label(class="mt-3 mb-2") }}
                    {{ form.semestre_atual() }}
                    {% for error in form.semestre_atual.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="form-section">
                <div class="form-group">
                    {{ form.curso() }}
                    <div class="d-flex flex-column" id="curso-btns">
                        <p>Qual é o seu curso?</p>
                    </div>
                    {% for error in form.curso.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
            </div>
            <div class="form-section">
                <p>Selecione abaixo temas que são de seu interesse.</p>
                {% for interesse in interesses %}
                    <div class="interesse" data-codigo="{{ interesse.id }}">
                        <strong>{{ interesse.nome }}</strong>
                        <p><small>{{ interesse.descricao }}</small></p>
                    </div>
                {% endfor %}
                <div class="form-group mt-4">
                    <p class="my-1">Pensou em algo que não está listado? <strong>Inclua abaixo!</strong></p>
                    <small class="mb-4 text-secondary">Aperte enter para incluir temas.</small>
                    <input type="text" class="form-control btn-dark" id="novo-interesse">
                </div>
                <div id="lista-temas-novos"></div>
            </div>
            <div class="form-section">
                <div class="form-group">
                    {{ form.sobre.label(class="mt-3 mb-2") }}
                    {{ form.sobre() }}
                    {% for error in form.sobre.errors %}
                        <span style="color: red;">{{ error }}</span>
                    {% endfor %}
                </div>
                <div class="d-flex justify-content-center mt-4">
                    <button class="btn btn-lg btn-primary text-center px-5 mt-4" id="btn-enviar-form">Enviar</button>
                </div>
            </div>
        </form>

        <div class="d-flex justify-content-between w-100 p-3 py-4 bottom-0" id="form-footer">
            <button class="btn btn-primary text-center disabled" id="btn-prev">
                <i class="bi bi-caret-left-fill me-2"></i>&nbsp;Anterior
            </button>
            <button class="btn btn-primary text-center" id="btn-next">
                Próximo&nbsp;<i class="bi bi-caret-right-fill me-2"></i>
            </button>
        </div>
    </section>

    <div class="modal fade" id="modal-email-sem-cadastro" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-dark rounded-4">
            <div class="modal-body bg-dark text-light rounded-4 p-3">
                <div class="d-flex justify-content-center">
                    <img src="../static/assets/img/sad-emoji.png" alt="Emoji triste" class="col-6 col-md-3 m-2">
                </div>
                <h4>Hmm... parece que você ainda não se inscreveu no projeto de adoção.</h4>
                <hr>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Voltar</button>
                    <button type="button" class="btn btn-primary link-adocao">Fazer inscrição</button>
                </div>
            </div>
        </div>
    </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="../static/scripts/form.js"></script>

    {% if alert %}
        <script>
            // Exibir o modal se show_modal for True
            $(document).ready(function() {
                $('#modal-email-sem-cadastro').modal('show');
            });
        </script>
    {% endif %}
{% endblock %}